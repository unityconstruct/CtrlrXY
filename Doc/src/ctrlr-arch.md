# Ctrlr Architecture
## Project
- Builds
- Doc
- JUCE - this is is the JUCE libarary in its entirety
  - docs
  - examples
  - extras
  - modules
  - tools
- JuceLibraryCode - autogenerated by JUCE during EXPORT
  - JuceHeader.h - autogenerated by JUCE
    - includes the juce_*.ccp
    - defines ProjectInfo
  - JucePluginDefines.h - autogenerated by JUCE
    - Audio plugin settings
  - juce_audio_basics
  - juce_audio_devices
  - juce_audio_formats
  - juce_audio_plugin_client
    - juce_audio_plugin_client_AAX*
    - juce_audio_plugin_client_AU*
    - juce_audio_plugin_client_RTAS*
    - juce_audio_plugin_client_Standalone
    - juce_audio_plugin_client_Unity
    - juce_audio_plugin_client_utils
    - juce_audio_plugin_client_VST*
  - juce_audio_processors
  - juce_audio_utils
  - juce_core
  - juce_data_structures
  - juce_events
  - juce_graphics
  - juce_gui_basics
  - juce_gui_extra
- Packaging
  - Linux
  - Mac
  - Windows
- Panel
- Scripts
- Source


# Source
- Core
  - CtrlrManager
  - CtrlrModulator
  - CtrlrPanel
  - StandaloneWrapper
- Lua
  - Deprecated
  - JuceClasses
  - Methods
    - CtrlrLuaMethod.*
    - CtrlrLuaMethodManager.*
    - CtrlrLuaMethodManagerCalls.*
- MIDI
  - CtrlrMIDILibrary
- Misc
  - boost/boost - libraries used by JUCE(?)
  - include
    - MingW
    - juce_PluginHostType.h - This file is part of the JUCE library - "Jules' Utility Class Extensions"
      - enumerates possible & detects PluginHost
    - keys.h - JuceHeader.h - ctrlr_sendKeyPressEvent
    - libr.h - libr - Add resources into ELF binaries
  - libusb
    - include - headers
    - src - cpp
  - lua
    - include - headers
    - src - lua.c
  - luabind
    - luabind - *.hpp
    - src - *.cpp
  - vst2sdk
    - plugininterfaces/vst2.x
    - public.sdk/source/vst2.x
- Native
  - CtrlrGeneric
  - CtrlrLinux
  - CtrlrMac
  - CtrlrNative
  - CtrlrWindows
- Plugin
  - CtrlrProcessor
  - CtrlrProcessorEditorForLive
- Resources
  - Fonts
  - Icons
  - Lua
    - clidebugger/
    - json4lua/
    - gen_LLookAndFeel*.sh
  - Misc
  - XML
    - CtrlrIDs.xml - has mapping for all panel options id=>text
    - CtrlrLuaClassTemplates.xml
    - CtrlrLuaMethodTemplates.xml
    - CtrlrMidiMultiTemplate.xml
    - CtrlrMIDITransactions.xml
    - CtrlrMIDIVendors.xml
- UIComponents
  - CtrlrApplicationWindow
  - CtrlrComponents
  - CtrlrLua
  - CtrlrMIDI
  - CtrlrPanel
  - CtrlrPropertyEditors
  - CtrlrWindowsManagers






# JUCE

## JUCE config

### modules
- juce_analytics
- juce_audio_basics
- juce_audio_devices
- juce_audio_formats
- juce_audio_plugin_client
- juce_audio_processors
- juce_audio_utils
- juce_blocks_basics
- juce_box2d
- juce_core
- juce_cryptography
- juce_data_structures
- juce_dsp
- juce_events
- juce_graphics
- juce_gui_basics
- juce_gui_extra
- juce_opengl
- juce_osc
- juce_product_unlocking
- juce_video

### exporters
- XCode(macOS)
  - Release
  - Debug
- Linux Makefile
  - Release
  - Debug
- VS2019
  - Debug
  - Release
  - Debug_Win32
  - Release_Win32
- Code::Blocks(Linux)
  - Debug
  - Release

### selected modules
- modules in filesystem
  - modules selected in Projucer

Modules
- juce_analytics
- juce_audio_basics
  - JUCE audio & MIDI data classes
- juce_audio_devices
  - JUCE uadio & MIDI IO device classes
- juce_audio_formats
  - JUCE audio file format codecs
- juce_audio_plugin_client
  - JUCE audio plugin client
- juce_audio_processors
  - JUCE audio processor classes
- juce_audio_utils
  - JUCE extra audio utlity classes
- juce_blocks_basics
- juce_box2d
- juce_core
  - JUCE core classes
- juce_cryptography
- juce_data_structures
  - JUCE dat model helper classes
- juce_dsp
- juce_events
  - JUCE message & event handling classes
- juce_graphics
  - JUCE graphics classes
- juce_gui_basics
  - JUCE GUI core classes
- juce_gui_extra
  - JUCE extended GUI classes
- juce_opengl
- juce_osc
- juce_product_unlocking
- juce_video




# Ctrlr-UI-Structure
- CtrlrDocumentPanel
  - CtrlrEditor
    - menuBar
    - CtrlrPanelEditor
      - CtrlrPanel
          - ctrlrPanelViewPort[0]
            - CtrlrViewport
              - CtrlrPanelCanvas
          - spacerComponent[1]
          - ctrlrPanelProperties[2]
            - CtrlrPanelComponentProperties


# Lua Source


### L / L*
```cpp
lua_State* L
```




CtrlrLuaObjectWrapper



## Source/Lua/CtrlrLuaManager

### process - Constructor(CtrlrPanel owner)
1. instantiate methodManader CtrlrLuaMethodManager
2. Check property ctrlrLuaDisabled
3. add methodManager value tree to CtrlrPanel
4. luaState /luaStateAudio
  - wrapCore(lua_State)
  - wrapCtrlrClasses(lua_State)
  - these calls expose the various lua methods based on their context/object
5. instantiate debugger
6. add to methodManager value tree




## Methods/CtrlrLuaMethodManagerCalls
- Entry point for Lua Script Exectution
- Has several overloaded methods for handing required parameters based on method calls
- Sequence
  1. ScopedLock (?)
  2. Init: LUA_DEBUG
  3. Check: isLuaDisabled()
  4. Try:
  5. Check: o->isValid()
  6. Call: luabind::call_function<void>(o->getObject().getObject()...*);
  7. Catch: CATCH_METHOD_EXCEPTION
  8. Status: return(true)


### Example
```lua
const bool CtrlrLuaMethodManager::call(CtrlrLuaMethod *o, CtrlrComponent *param1, const String param2)
{
	const ScopedLock sl(methodManagerCriticalSection);

	LUA_DEBUG

	if (isLuaDisabled())
		return (true);

	try
	{
		if (o->isValid())
		{
			luabind::call_function<void>(o->getObject().getObject(), param1, param2.toUTF8().getAddress());
		}
	}
	CATCH_METHOD_EXCEPTION

	return (true);
}
```

## Methods/CtrlrLuaMethod

## Methods/CtrlrLuaMethodManager